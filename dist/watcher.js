// Generated by CoffeeScript 1.10.0
var chalk, chokidar, watchedFiles, watcher, watcherAdd;

chokidar = require('chokidar');

chalk = require('chalk');

watchedFiles = [];

watcher = chokidar.watch([], {
  'cwd': process.cwd(),
  'ignoreInitial': true,
  'ignored': /(?:\.git|node_modules)/
});

watcher.ready = new Promise(function(resolve) {
  watcher.on('ready', resolve);
  return setTimeout(resolve, 200);
});

watcherAdd = watcher.add.bind(watcher);

watcher.add = function(path) {
  if (!watchedFiles.includes(path)) {
    watchedFiles.push(path);
    return watcherAdd(path);
  }
};

if (process.platform === 'darwin' && !watcher.options.useFsEvents) {
  console.error(chalk.bgRed.white.bold("Error") + " FSEvents is not being used! Falling back to unefficient manual polling method - expect high CPU Usage for large directories.");
}

module.exports = watcher;
